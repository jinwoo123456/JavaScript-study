<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script type="text/javascript">
        /*
        map()함수
        콜백함수를 샐행한 결과를 통해 새로운 배열을 만들 떄 사용
        즉 foreach()와는 다르게 반환값이 존재함
        배열의 크기만큼 n번 반복해서 콜백함수를 호출하고 , thisArags의 사용법도
        동일함.
        호출한 배열의 크기가 n이라면 n개의 요소 전체를 반환한다.
        형식:
        var array= [1,2,3,....N];
        var= newArray.map(
        callBackFunction(현재값,현재값의인덱스,호출한배열){
        실행구문},
        return 
        thisArgs);
        */
        function mapTest1(){
            console.error("mapTest1().called..기본사용법");
            //원본 배열 생성
            var oldArray = [1,2,3,4,5];
            //원본배열의 각 요소에 2를 곱한 결과를 반환하여 새로운 배열을 생성함
            var newArray = oldArray.map(function(currentVal,index,array){
                //forEach(0와 동일한 결과(현재값과 인덱스)를 콘솔에 출력
                console.log("현재값"+currentVal,'인덱스'+index,'배열'+array);
                return currentVal*2; // 2를 곱한 결과를 반환
            });
            console.log(newArray); // [2,4,6,8,10]
        }
        function mapTest2(){
            console.error("mapTest2() called...JSON객체 배열 활용");
            //객체를 요소로 하는 배열 선언
            var oldJSON = [
            {name:"이건",salary:500000000},
            {name:"홍길동",salary:100000000},
            {name:"임신구",salary:200000000}
            ,{name:"철수",salary:300000000}
            ];
            //콜백함수를 4번 반복 호출하여 , 반환된 값을 newJson에 저장
            var newJson = oldJSON.map(function(currentVal){
                //빈 객체를 생성
                var returnObj = {}
                /*
                각 루프에서 반환되는 currentValdms
                {name: "임신구", salary: 200000000}과 같은 객체이다.
                따라서 name을 key로 사용하고, salary를 value로 지정한
                객체를 완성한다.
                */
                returnObj[currentVal.name] = currentVal.salary;
                
                return returnObj;
            });
            console.log(newJson);
        }
function mapTest3(){
    console.error("mapTest2() called..화살표 함수 사용하기");
    var oldArray = [1,2,3,4,5];
    //콜백함수에는 첫번쨰 매개변수만 사용되어,현재 루프의 요소값이 전달된다.
    var newArray = oldArray.map((num)=>{
        //각 루프의 요소를 제곱한 결과를 반환한다.
        return Math.pow(num,2);
    });
    //원본배열을 제곱한 결과를 가지는 새로운 배열이 출력된다.
    console.log(newArray);
}
    </script>
    <h2>고차함수 - map()</h2>
    <div>
        <input type="button" onclick="mapTest1();" value="map1">
        <input type="button" onclick="mapTest2();" value="map2">
        <input type="button" onclick="mapTest3();" value="map3">
    </div>

</body>
</html>