<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script type="text/javascript">
      /*
      filter() 함수:
      filter라는 명칭과 같이 콜백함수의 조건에 만족하는 요소만 반환하여 새로운
      배열을 만들때 사용한다.
      map()과 형식이 완전 동일하지만, 반환값에 대한 부분만 차이가 있다.
      형식:
      var array = [1,2,3....N];
      var newArray = array.filter(function(currentValue, index, array){
      실행부
        return 반환값에 대한 조건; //조건에 만족하는 요소만 반환
      }, thisArgs);
      */
      function filterTest1() {
        console.error("filterTest1().called..조건에 맞는 엘리먼트만 추출");
        var oldArray = [1, 2, 3, 4, 5];
        //원본배열의 각 요소에 2를 곱한 결과를 반환하여 새로운 배열을 생성함
        var newArray = oldArray.filter(function (currentVal) {
          //forEach(0와 동일한 결과(현재값과 인덱스)를 콘솔에 출력
          console.log("현재 원소" + currentVal,);
          return currentVal <= 3; // 2를 곱한 결과를 반환
        });
        console.log(newArray); // [2,4,6,8,10]
      }
      function filterTest2() {
        console.error("filterTest2() called...JSON객체형배열 사용 및 검색");
        //객체형 배열 생성
        var oldJSON = [
          { name: "이건", salary: 500000 },
          { name: "홍길동", salary: 100000000 },
          { name: "임신구", salary: 20000 },
          { name: "철수", salary: 300000000 },
          { name: "나윤", salary: 5000000 },
          { name: "주희", salary: 100000000 },
          { name: "야인", salary: 5000000 },
          { name: "낸시", salary: 1004000 },
        ];
        //급여가 30만 이상인 json객체만 반환하여 새로운 배열 생성
        /*thisArgs는 사용하지 않는다. 이런 경우 명시적으로 undefined를
        기술하기도 한다.*/
        var newJson = oldJSON.filter(function (currentVal) {
          return currentVal.salary >= 5000000;
        }, undefined);
        console.log(newJson);
      }
      function filterTest3() {
        console.error("filterTest3() called..thisArgs 매개변수 사용");
        var oldArray = [1, 2, 3, 4, 5, 50, 100];
        //filter()함수의 매개변수로 사용할 객체 생성
        var thisArgs = { min: 1, max: 10 };
        // 콜백함수를 외부에 별도로 정의.
        function getMinMax(value) {
          return value >= this.min && value <= this.max;
        }
        var newArray = oldArray.filter(getMinMax, thisArgs);
        console.log("thisArgs 사용결과 : ", newArray);
      }
    </script>
    <h2>고차함수 - filter()</h2>
    <div>
      <input type="button" onclick="filterTest1();" value="filter1" />
      <input type="button" onclick="filterTest2();" value="filter2" />
      <input type="button" onclick="filterTest3();" value="filter3" />
    </div>
    <p>sdsdsdsd</p>
    <p>sdsdsdsd</p>
  </body>
</html>
